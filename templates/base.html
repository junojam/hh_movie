{% load static %}
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://kit.fontawesome.com/6725d2d4bc.js" crossorigin="anonymous"></script>
    <title>Document</title>
    <style>
      .backgroundimagesetting {
        width: 100%;
        min-height: 100%;
        position: relative;
        z-index: 1;
      }
      .backgroundimagesetting::after {
        width: 100%;
        height: 100%;
        content: "";
        background: url('https://www.themoviedb.org/t/p/original{{movie.backdrop_path}}')  no-repeat center; 
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        opacity: 1;
        background-size: cover;
      }

      .mainbackgroundimagesetting {
        width: 100%;
        min-height: 100%;
        position: relative;
        z-index: 1;
      }
      .mainbackgroundimagesetting::after {
        width: 100%;
        height: 100%;
        content: "";
        background: url('{% static 'movies/BACKGROUNDIMAGE.jpg' %}')  no-repeat; 
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        opacity: 0.8;
        background-size: cover;
      }

    </style>
</head>
<body class="mainbackgroundimagesetting" style="height: 100%">
  <!-- Modal 1 -->
  <div class="modal fade" id="exampleModal1" >
    <div class="modal-dialog ">
      <div class="modal-content">

        <div class="justify-content-center text-center modal-header ">
          <h3 class="modal-title">로그인</h3>
        </div>
        <br>
        <div class="modal-body justify-content-center text-center">
          <form action="{% url 'accounts:login' %}" method="POST">
            {% csrf_token %}
            {% comment %} {{ form.as_p }}  {% endcomment %}
            <label for="username"></label>
            <input id="username" type="text" name="username" placeholder="아이디">
            <br>
            <br>
            <label for="password"></label>
            <input id="password" type="password" name="password" placeholder="비밀번호">
            <br>
            <br>
            <div class="d-flex justify-content-center">
              <input class="btn btn-primary" type="submit" value="로그인">
              <button type="button" class="btn btn-success ms-2" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                <span>회원가입</span>
              </button>
            </div>
            <br>
          </form>
        </div>

        <div class="modal-footer justify-content-center">
          {% comment %} <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> {% endcomment %}
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="exampleModal2" >
    <div class="modal-dialog ">
      <div class="modal-content">
        <div class="justify-content-center text-center modal-header ">
          <h3 class="modal-title">회원가입</h3>
        </div>
        <br>
        <div class="modal-body justify-content-center text-center">
          <form action="{% url 'accounts:signup' %}" method="POST">
            {% csrf_token %}
            <label for="username"></label>
            <input id="username" type="text" name="username" placeholder="아이디" >
            <br>
            <br>
            <label for="password1"></label>
            <input id="password1" type="password" name="password1" placeholder="비밀번호">
            <br>
            <br>
            <label for="password2"></label>
            <input id="password2" type="password" name="password2" placeholder="비밀번호확인">
            <br>
            <br>
            <div class="d-flex justify-content-center">
              <input class="btn btn-primary" type="submit" value="회원가입">
            </div>
          </form>
        </div>

        <div class="modal-footer justify-content-center">
          {% comment %} <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> {% endcomment %}
        </div>
      </div>
    </div>
  </div>
    <div style="height: 100%">
      {% if request.user.is_authenticated %}
      <nav class="d-flex justify-content-between navbar-light bg-dark sticky-top">
        <div class="d-flex flew-row">
          <a href="{% url 'movies:index' %}">
            <img class="mx-5 my-2" width="100px" src="{% static 'movies/LOGO_INVISIBLE.png' %}" alt="My image">
          </a>
          <div class="d-flex flex-row">
            <a class="d-flex align-items-center mx-2 text-decoration-none text-white" href="{% url 'movies:index' %}">Home</a>

            {% comment %} 영화 추천 {% endcomment %}
            <a class="d-flex align-items-center mx-2 text-decoration-none text-white" href="#">Recommend</a>
            
            <div class="d-flex align-items-center justify-content-start  text-decoration-none text-white">
              <a class=" text-decoration-none text-white mx-2" href="{% url 'articles:index' %}">Community</a>
            </div>
          </div>
        </div>
        <div class="d-flex flex-row justify-content-start align-items-center">
            <div class="text-white mx-2">
              <div>안녕하세요, 
                  <a class="text-decoration-none text-white" href="{% url 'accounts:profile' user.username %}">
                    {{ user }}
                  </a>
                  님
              </div>
            </div>

            <div class="mx-2">
              <a class="text-decoration-none text-white" href="{% url 'accounts:profile' user.username %}">내 프로필</a>
            </div>

            <div class="me-5 ms-2">
              <form action="{% url 'accounts:logout' %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="Logout">
              </form>
            </div>
            <!-- <div class="me-5 m-1">
              <form action="{% url 'accounts:delete' %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="회원탈퇴">
              </form>
            </div> -->
        </div>
      </nav>
      {% else %}
      <nav class="d-flex justify-content-between navbar-light bg-dark sticky-top">
        <div class="d-flex flew-row">
          <a href="{% url 'movies:index' %}">
            <img class="mx-5 my-2" width="100px" src="{% static 'movies/LOGO_INVISIBLE.png' %}" alt="My image">
          </a>
          <div class="d-flex flex-row">
            <a class="d-flex align-items-center mx-2 text-decoration-none text-white" href="{% url 'movies:index' %}">Home</a>

            <a class="d-flex align-items-center mx-2 text-decoration-none text-white" href="#">Recommend</a>
            
            <div class="d-flex align-items-center justify-content-start  text-decoration-none text-white">
              <a class=" text-decoration-none text-white mx-2" href="{% url 'articles:index' %}">Community</a>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row justify-content-end align-items-center">
          
          {% comment %} <div class="m-1">
            <a class="text-decoration-none text-white" href="{% url 'accounts:login' %}">Login</a>
          </div>
          <div class="me-5 m-1">
            <a class="text-decoration-none text-white" href="{% url 'accounts:signup' %}">Signup</a>
          </div> {% endcomment %}

          <button type="button" class="btn btn-dark m-1" data-bs-toggle="modal" data-bs-target="#exampleModal1">
            Login
          </button>
          <button type="button" class="btn btn-dark me-5 m-1" data-bs-toggle="modal" data-bs-target="#exampleModal2">
            Signup
          </button>
        </div>
      </nav>
      {% endif %}

      {% block index %}
      {% endblock index %}

      {% block detail %}
      {% endblock detail %}

      {% block content %}
      {% endblock content %}

      </div>
    </div>
    
</body>
<script>
  var myModal = document.getElementById('myModal')
  var myInput = document.getElementById('myInput')
  
  myModal.addEventListener('shown.bs.modal', function () {
    myInput.focus()
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</html>